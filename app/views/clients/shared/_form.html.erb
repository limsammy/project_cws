<%= f.input :name, label: "Client Name", placeholder: "Client name" %>
<%= f.input :email, label: "Email", placeholder: "Email" %>
<%= f.input :mob_number, label: "Mobile Number", placeholder: "Mobile Number" %>
<%= f.input 'company_id' , label: "Company", collection: Company.all.map{ |a| [a.name, a.id]} %>

<%= f.fields_for :address do |addr| %>
  <%= addr.input "line_1", label: "LINE 1" %>
  <%= addr.input "line_2", label: "line 2" %>
  <%= addr.input :country, collection: CS.get.map{|k,v| [v,k]}, as: :select %>
  <%= addr.input :state, collection: CS.get.map{|k,v| [v,k]}, as: :select %>
  <%#= f.input :city, collection: CS.get(:in, :up), as: :select %>
  <%#= addr.input "country",as: :text, label: "Country" %>
  <%#= addr.input "state", label: "State" %>
  <%= addr.input "zip", label: "Zip" %>
<%end%>
<%= f.submit "Save" %>



<script type="text/javascript">
  $('#client_address_attributes_country').change(function() {
    element = $(this).val()
    $.ajax({
      url: '/companies/find_states',
      data: {country_value: element},
      type: "GET",
      success:function(data) {
        var output = [];
        $.each(data, function(key, value){
          output.push('<option value="'+ key +'">'+ value +'</option>');
        });
        console.log(output);
        $('#client_address_attributes_state').html(output);
      }
    });
  });
</script>
